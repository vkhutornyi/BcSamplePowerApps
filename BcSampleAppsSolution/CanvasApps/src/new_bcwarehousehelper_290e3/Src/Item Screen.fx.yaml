"'Item Screen' As screen.'phoneLayout_FluidGridWithHeaderPageLayout_ver3.0'":
    Fill: =varTheme.secondaryColor
    OnVisible: |+
        =UpdateContext({ctxInventory: 0, ctxAllowSubmit: false});
        

    conItemScreenContent As groupContainer.verticalAutoLayoutContainer:
        Height: =Parent.Height - 40
        LayoutAlignItems: =LayoutAlignItems.Center
        LayoutDirection: =LayoutDirection.Vertical
        LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
        LayoutMode: =LayoutMode.Auto
        Width: =Parent.Width
        ZIndex: =15

        conItemPageHeader As groupContainer.manualLayoutContainer:
            FillPortions: =0
            Height: =100
            LayoutMinHeight: =112
            LayoutMinWidth: =250
            ZIndex: =1

            Label2 As label:
                Align: =Align.Center
                Height: =80  
                Size: =24
                Text: =varSelectedWarehouse.displayName
                Width: =Parent.Width
                X: =
                Y: =Parent.Height/2 - Self.Height/2
                ZIndex: =1

            Icon1 As icon.Cancel:
                Color: =varTheme.brandColor
                Height: =50
                Icon: =Icon.Cancel
                OnSelect: =Navigate('Scan screen', ScreenTransition.Fade)
                Width: =50
                X: =Parent.Width - Self.Width - 20
                Y: =Parent.Height/2 - Self.Height/2
                ZIndex: =2

        conItemImage As groupContainer.manualLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            FillPortions: =0
            Height: =imgItemImage.Height + 4
            LayoutMinHeight: =112
            LayoutMinWidth: =250
            ZIndex: =4

            Rectangle2 As rectangle:
                Fill: =RGBA(163, 163, 163, 0.35)
                Height: =imgItemImage.Height + 4
                Width: =imgItemImage.Width + 4
                X: =imgItemImage.X - 2
                ZIndex: =1

            imgItemImage As image:
                BorderColor: =RGBA(149, 149, 149, 1)
                Height: =400
                Image: =varScannedItem.picture
                ImagePosition: =ImagePosition.Fill
                Width: =300
                X: =Parent.Width/2 - Self.Width/2
                Y: =2
                ZIndex: =2

        conItemDetails As groupContainer.manualLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            FillPortions: =0
            Height: =150
            LayoutMinHeight: =112
            LayoutMinWidth: =250
            X: =40
            Y: =40
            ZIndex: =5

            Label3 As label:
                Align: =Align.Center
                Height: =70
                Size: =21
                Text: =varScannedItem.number & " " & varScannedItem.displayName
                Width: =454
                X: =Parent.Width/2 - Self.Width/2
                ZIndex: =1

            Label3_2 As label:
                Align: =Align.Center
                Height: =50
                Size: =21
                Text: =varScannedItem.baseUnitOfMeasureCode
                Width: =400
                X: =Parent.Width/2 - Self.Width/2
                Y: =80
                ZIndex: =2

        conInventoryControl As groupContainer.manualLayoutContainer:
            AlignInContainer: =AlignInContainer.SetByContainer
            FillPortions: =0
            Height: =80
            LayoutMinHeight: =112
            LayoutMinWidth: =250
            Width: =300
            X: =Parent.Width/2 - Self.Width/2
            Y: =715
            ZIndex: =6

            Button1 As button:
                BorderThickness: =0
                DisplayMode: =DisplayMode.View
                Fill: =RGBA(255, 255, 255, 1)
                Height: =80
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                RadiusBottomLeft: =40
                RadiusBottomRight: =40
                RadiusTopLeft: =40
                RadiusTopRight: =40
                Size: =24
                Text: =""
                Width: =300
                ZIndex: =1

            Icon2 As icon.Add:
                Height: =40
                Icon: =Icon.Add
                OnSelect: |
                    =UpdateContext({ctxInventory: ctxInventory + 1, ctxAllowSubmit: true});
                Width: =40
                X: =Parent.Width -20 - Self.Width
                Y: =20
                ZIndex: =3

            Icon3 As icon.HorizontalLine:
                Height: =40
                Icon: =Icon.HorizontalLine
                OnSelect: |-
                    =UpdateContext({ctxInventory: ctxInventory - 1, ctxAllowSubmit: true})
                Width: =40
                X: =20
                Y: =20
                ZIndex: =4

            TextInput1 As text:
                Align: =Align.Center
                BorderThickness: =0
                Color: =varTheme.brandColor
                Default: =ctxInventory
                Format: =TextFormat.Number
                Height: =80
                OnChange: |
                    =UpdateContext({ctxInventory: Value(Self.Text), ctxAllowSubmit: true});
                OnSelect: |-
                    =UpdateContext({ctxAllowSubmit: true})
                PaddingLeft: =5
                Size: =26
                Width: =140
                X: =Parent.Width/2 - Self.Width/2
                ZIndex: =7

        btnSubChanges As button:
            BorderThickness: =0
            DisabledColor: =RGBA(255, 255, 255, 1)
            DisabledFill: =RGBA(237, 237, 237, 1)
            DisplayMode: =If(ctxAllowSubmit, DisplayMode.Edit, DisplayMode.Disabled)
            Fill: =varTheme.brandColor
            Height: =220
            LayoutMinHeight: =70
            LayoutMinWidth: =280
            OnSelect: |
                =UpdateContext({ctxAllowSubmit: false, ctxSubmitInprogress: true});
                
                
                IfError(
                    Patch('items (v2.0)', {id: varScannedItem.id}, {inventory: ctxInventory }),
                    Set(varErrorOnPatch, true);
                    Notify("Inventory update failed for " &varScannedItem.displayName & " " & FirstError.Message, NotificationType.Error)
                );
                
                If(Not(varErrorOnPatch), 
                    Navigate('Item updated screen', ScreenTransition.Fade)
                );
                
                UpdateContext({ctxAllowSubmit: true, ctxSubmitInprogress: false});
            RadiusBottomLeft: =Self.Width / 2
            RadiusBottomRight: =Self.Width / 2
            RadiusTopLeft: =Self.Width / 2
            RadiusTopRight: =Self.Width / 2
            Size: =24
            Text: ="Submit"
            Width: =220
            X: =Parent.Width/2 - Self.Width/2
            Y: =Parent.Height - Self.Height - 20
            ZIndex: =7

    conSubmitOverlay As groupContainer.verticalAutoLayoutContainer:
        Height: =Parent.Height
        LayoutDirection: =LayoutDirection.Vertical
        LayoutMode: =LayoutMode.Auto
        Visible: =ctxSubmitInprogress
        Width: =Parent.Width
        ZIndex: =16

        comLoadingOverlay_1 As comLoadingOverlay:
            LayoutMinHeight: =640
            LayoutMinWidth: =640

